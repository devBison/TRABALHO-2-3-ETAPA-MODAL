<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página de Cadastro</title>
    <link rel="stylesheet" href="styletres.css">
</head>
<body>


<header>
    <div class="container">
        <h1>FORMULARIO LEGAL</h1>
        <button id="loginBtn">Login/Cadastro</button>
    </div>
</header>

<main></main>


<div class="modal" id="modal">
    <div class="modal-content">
        <h2>Cadastro de Usuário</h2>
        <form id="cadastroForm">
            <input type="text" id="nome" placeholder="Nome" required><br>
            <input type="email" id="email" placeholder="Email" required><br>
            <input type="tel" id="telefone" placeholder="Telefone" required placeholder="(31)99999-9999"  oninput=mascara_telefone() maxlength="14"><br>
            <input type="text" id="cpf" placeholder="CPF" required placeholder=" xxx.xxx.xxx-xx" oninput=mascara_cpf() maxlength="14"><br>
            <input type="password" id="senha" placeholder="Senha" required><br>
            <button type="submit">Cadastrar</button>
        </form>
        <button class="close-btn" id="closeBtn">Fechar</button>
    </div>
</div>

<!-- Redirecionamento automático -->
<script>
    function mascara_telefone ()
{
   //limitador
 var tel = document.getElementById("telefone").value
    console.log(tel)
  tel=tel.slice(0,14) //(pode limitar a quantidade de char na entrada pelo java script)
    console.log(tel)
  document.getElementById("telefone").value=tel
tel=document.getElementById("telefone").value.slice(0,10)
    console.log(tel)
   
    //máscara
    var tel_formatado = document.getElementById("telefone").value
    if (tel_formatado[0]!="(")
    {
        if(tel_formatado[0]!=undefined)
        {
            document.getElementById("telefone").value="("+tel_formatado[0];
        }
    }

    if (tel_formatado[3]!=")")
    {
        if(tel_formatado[3]!=undefined)
        {
            document.getElementById("telefone").value=tel_formatado.slice(0,3)+")"+tel_formatado[3]
        }
    }

    if (tel_formatado[9]!="-")
    {
        if(tel_formatado[9]!=undefined)
        {
            document.getElementById("telefone").value=tel_formatado.slice(0,9)+"-"+tel_formatado[9]
        }
    }
}
function mascara_cpf()
{ var cpf_formatado = document.getElementById("cpf").value
    if (cpf_formatado[3]!=".")
    {
        if (cpf_formatado[3]!=undefined)
        {
            document.getElementById("cpf").value=cpf_formatado.slice(0,3)+"."+cpf_formatado[3];
            
        }
    }

    if (cpf_formatado[7]!=".")
    {
        if (cpf_formatado[7]!=undefined)
        {
            document.getElementById("cpf").value=cpf_formatado.slice(0,7)+"."+cpf_formatado[7];
            
        }
    }

    if (cpf_formatado[11]!=".")
    {
        if (cpf_formatado[11]!=undefined)
        {
            document.getElementById("cpf").value=cpf_formatado.slice(0,11)+"-"+cpf_formatado[11];
            
        }
    }

    if (cpf_formatado[13]!="-")
    {
        if(cpf_formatado[13]!=undefined)
        {
            document.getElementById("cpf").value=cpf_formatado.slice(0,13)+cpf_formatado[13]
        }
    }

}       

function mascara_cpf() {
    const cpf = document.getElementById("cpf");
    const cpfFormatado = cpf.value;

    if (cpfFormatado[3] !== ".") {
        if (cpfFormatado[3] !== undefined) {
            cpf.value = cpfFormatado.slice(0, 3) + "." + cpfFormatado[3];
        }
    }

    if (cpfFormatado[7] !== ".") {
        if (cpfFormatado[7] !== undefined) {
            cpf.value = cpfFormatado.slice(0, 7) + "." + cpfFormatado[7];
        }
    }

    if (cpfFormatado[11] !== "-") {
        if (cpfFormatado[11] !== undefined) {
            cpf.value = cpfFormatado.slice(0, 11) + "-" + cpfFormatado[11];
        }
    }
}


function mascara_telefone() {
    const telefone = document.getElementById("telefone");
    const tel = telefone.value;
    telefone.value = tel.slice(0, 14);
    const telFormatado = telefone.value;

    if (telFormatado[0] !== "(") {
        if (telFormatado[0] !== undefined) {
            telefone.value = "(" + telFormatado[0];
        }
    }

    if (telFormatado[3] !== ")") {
        if (telFormatado[3] !== undefined) {
            telefone.value = telFormatado.slice(0, 3) + ")" + telFormatado[3];
        }
    }

    if (telFormatado[9] !== "-") {
        if (telFormatado[9] !== undefined) {
            telefone.value = telFormatado.slice(0, 9) + "-" + telFormatado[9];
        }
    }
}



    // Exibir o modal 
document.getElementById('loginBtn').onclick = function() {
    document.getElementById('modal').style.display = 'flex';
};

// Fechar o modal 
document.getElementById('closeBtn').onclick = function() {
    document.getElementById('modal').style.display = 'none';
};

// salvar no localStorage
document.getElementById('cadastroForm').onsubmit = function(event) {
    event.preventDefault();  // Impedir o envio do formulário
    
    // Coletar os dados do formulário
    const nome = document.getElementById('nome').value;
    const email = document.getElementById('email').value;
    const telefone = document.getElementById('telefone').value;
    const cpf = document.getElementById('cpf').value;
    const senha = document.getElementById('senha').value;

    // Salvar os dados no localStorage
    const usuario = {
        nome,
        email,
        telefone,
        cpf,
        senha
    };
    
    localStorage.setItem('usuario', JSON.stringify(usuario));

    // Exibir a mensagem
    alert('Seu cadastro foi realizado!');

    // Fechar o modal
    document.getElementById('modal').style.display = 'none';

    // Redirecionar para a página de perfil
    window.location.href = 'perfil.html';
};
</script>
</body>
</html>